<!DOCTYPE html><html lang="en"><head><title>open</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="open"><meta name="groc-project-path" content="open.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">open.js</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="hoodieopen">hoodie.open</h1>

<p>just some loose thoughts on a hoodie.open method.</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>open a "store"</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;user/joe&quot;</span><span class="p">)</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;user/jane/public&quot;</span><span class="p">).</span><span class="nx">store</span><span class="p">.</span><span class="nx">findAll</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="p">{})</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;share/abc8320&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">}).</span><span class="nx">subscribe</span><span class="p">()</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;global&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;store:created:track&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">track</span><span class="p">)</span> <span class="p">{})</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>shortcuts</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">remote</span><span class="p">.</span><span class="nx">push</span><span class="p">()</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">user</span><span class="p">(</span><span class="s1">&#39;jane&#39;</span><span class="p">).</span><span class="nx">store</span><span class="p">.</span><span class="nx">findAll</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="p">{})</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;abc832&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">}).</span><span class="nx">subscribe</span><span class="p">()</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;store:created:track&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">track</span><span class="p">)</span> <span class="p">{})</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="a-store-module">a "store" module?</h2>

<p>I can open any kind of named store, like a sharing or a users public
store. An "opened" store does always provide the same API whereat
some might require special privileges. They all return a promise</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>instantiate</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">(</span><span class="s2">&quot;share/abc8320&quot;</span><span class="p">)</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>store / find objects</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;todolist&quot;</span><span class="p">,</span><span class="s2">&quot;xy20ad9&quot;</span><span class="p">)</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">findAll</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">)</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;remember the milk&quot;</span><span class="p">})</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="s2">&quot;exists7&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;get some rest&quot;</span><span class="p">})</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="s2">&quot;exists7&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;get some rest&quot;</span><span class="p">})</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">updateAll</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">done</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="s2">&quot;exists7&quot;</span><span class="p">)</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">removeAll</span><span class="p">(</span><span class="s2">&quot;todo&quot;</span><span class="p">)</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;completed_todos&quot;</span><span class="p">)</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;notify&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;jane@xmpl.com&quot;</span><span class="p">})</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>sync</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">pull</span><span class="p">()</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">push</span><span class="p">()</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">sync</span><span class="p">()</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>event binding</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="options">options</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>password</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;share/abc8320&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span>
<span class="p">})</span></div></div></div></div></body></html>